<section class="max-w-7xl mx-auto p-4 grid lg:grid-cols-3 gap-6">
  <div class="lg:col-span-2 space-y-6">

    <!-- A) Catalogue prestations (admin) -->
    <div class="rounded-xl border border-neutral-200 bg-white p-4">
      <div class="flex items-center justify-between gap-3 mb-3">
        <h2 class="text-base font-semibold">Catalogue des prestations (admin)</h2>
        <div class="flex gap-2">
          <button id="adm-export" class="h-9 px-3 rounded-lg border border-neutral-300 hover:bg-neutral-50 text-sm">Exporter</button>
          <label class="h-9 px-3 rounded-lg border border-neutral-300 hover:bg-neutral-50 text-sm cursor-pointer">
            Importer
            <input id="adm-import" type="file" accept="application/json" class="hidden">
          </label>
        </div>
      </div>

      <div class="overflow-x-auto">
        <table class="w-full text-sm align-middle">
          <thead class="text-left text-neutral-500">
            <tr>
              <th class="py-2 pr-3">Libellé</th>
              <th class="py-2 pr-3">Clé</th>
              <th class="py-2 pr-3">PV €/m² (TTC)</th>
              <th class="py-2 pr-3">CR €/m²</th>
              <th class="py-2">Action</th>
            </tr>
          </thead>
          <tbody id="adm-services-body"><!-- JS --></tbody>
        </table>
      </div>

      <div class="mt-3">
        <button id="adm-add" class="h-9 px-3 rounded-lg border border-neutral-300 hover:bg-neutral-50 text-sm">
          Ajouter une prestation
        </button>
      </div>
      <p class="text-xs text-neutral-500 mt-2">
        Les libellés & PV €/m² modifiés ici se répercutent en direct dans l’onglet <strong>Devis</strong>.
      </p>
    </div>

    <!-- B) Coûts de revient (€/m²) -->
    <div class="rounded-xl border border-neutral-200 bg-white p-4">
      <h3 class="text-base font-semibold mb-3">Mes coûts de revient (€/m²) par prestation</h3>
      <div class="overflow-x-auto">
        <table class="w-full text-sm">
          <thead class="text-left text-neutral-500">
            <tr>
              <th class="py-2 pr-3">Prestation</th>
              <th class="py-2 pr-3">CR €/m²</th>
              <th class="py-2">PV €/m² (TTC)</th>
            </tr>
          </thead>
          <tbody id="cr-config-table"><!-- JS --></tbody>
        </table>
      </div>
      <div class="mt-2">
        <button id="btn-cr-reset-costs" class="h-9 px-3 rounded-lg border border-neutral-300 hover:bg-neutral-50 text-sm">
          Réinitialiser mes coûts
        </button>
      </div>
    </div>

    <div id="cr-catalog-mirror" class="mt-4"></div>

    <!-- C) Paramètres transport -->
    <div class="rounded-xl border border-neutral-200 bg-white p-4">
      <h3 class="text-base font-semibold mb-3">Paramètres transport (admin)</h3>
      <div class="grid sm:grid-cols-2 gap-4">
        <label class="block">
          <span class="text-sm text-neutral-600">Adresse de référence (départ)</span>
          <input id="adm-origin" type="text" class="mt-1 w-full h-10 px-3 rounded-lg border border-neutral-300 bg-white"
                 placeholder="ex. 12 Rue de l’Atelier, 75000 Paris">
        </label>
        <label class="block">
          <span class="text-sm text-neutral-600">Barème kilométrique (€/km)</span>
          <input id="adm-km-rate" type="number" min="0" step="0.01" inputmode="decimal"
                 class="mt-1 w-full h-10 px-3 rounded-lg border border-neutral-300 bg-white" placeholder="ex. 1.20">
        </label>
      </div>
      <p class="text-xs text-neutral-500 mt-2">
        Le barème s’applique au calcul du transport. L’adresse est utilisée comme point d’origine pour les trajets auto.
      </p>
    </div>
  </div>

  <!-- Récap latéral (inchangé) -->
  <aside class="lg:col-span-1">
    <div class="sticky top-20 rounded-xl border border-neutral-200 bg-white p-4 space-y-3">
      <h3 class="text-base font-semibold">Récapitulatif</h3>
      <div class="text-sm text-neutral-500">Surface totale</div>
      <div id="cr-surface" class="text-lg font-semibold">— m²</div>
      <hr class="my-2">
      <div class="text-sm text-neutral-500">Coût de revient / m²</div>
      <div id="cr-m2" class="text-lg font-semibold">— €/m²</div>
      <div class="text-sm text-neutral-500 mt-2">Coût de revient / meuble</div>
      <div id="cr-meuble" class="text-lg font-semibold">— €</div>
      <hr class="my-2">
      <div class="text-sm text-neutral-500">Prix vendu / m²</div>
      <div class="text-sm">HT : <span id="pv-m2-ht" class="font-medium">— €/m²</span></div>
      <div class="text-sm">TTC : <span id="pv-m2-ttc" class="font-medium">— €/m²</span></div>
      <div class="text-sm text-neutral-500 mt-2">Prix vendu total</div>
      <div class="text-sm">HT : <span id="pv-total-ht" class="font-medium">— €</span></div>
      <div class="text-sm">TTC : <span id="pv-total-ttc" class="font-medium">— €</span></div>
      <hr class="my-2">
      <div class="text-sm text-neutral-500">Rentabilité (sur HT)</div>
      <div id="rentabilite" class="text-lg font-semibold">— %</div>
      <div class="text-sm text-neutral-500">Temps max pour ≥ 50 € HT/h</div>
      <div id="cr-tmax" class="text-lg font-semibold">— h</div>
      <p id="cr-hint" class="text-xs text-neutral-500 mt-2 hidden">
        Définis tes coûts (€/m²), PV et barème km pour un résultat précis.
      </p>
    </div>
  </aside>
</section>
